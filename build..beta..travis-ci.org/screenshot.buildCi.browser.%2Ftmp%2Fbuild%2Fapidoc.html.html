<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    overflow-wrap: break-word;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/kaizhu256/node-swagger-validate-lite">swagger-validate-lite (2019.2.12)</a>
</h1>
<h4>this zero-dependency package will provide a simple cli-tool to validate swagger.json</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.swagger-validate-lite">module swagger-validate-lite</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.swagger-validate-lite.swaggerValidate">
            function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidate
            <span class="apidocSignatureSpan">(swaggerJson)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.swagger-validate-lite.swaggerValidateDataParameters">
            function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateDataParameters
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.swagger-validate-lite.swaggerValidateDataSchema">
            function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateDataSchema
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.swagger-validate-lite.swaggerValidateFile">
            function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateFile
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">swagger-validate-lite.</span>timeExit</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.swagger-validate-lite" id="apidoc.module.swagger-validate-lite">module swagger-validate-lite</a></h1>


    <h2>
        <a href="#apidoc.element.swagger-validate-lite.swaggerValidate" id="apidoc.element.swagger-validate-lite.swaggerValidate">
        function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidate
        <span class="apidocSignatureSpan">(swaggerJson)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">swaggerValidate = function (swaggerJson) {
<span class="apidocCodeCommentSpan">/*
 * this function will validate the json-object swaggerJson
 */
</span>    var operation;
    var operationIdDict;
    var pathDict;
    var prefix;
    var test;
    var tmp;
    operationIdDict = {};
    swaggerJson = swaggerJson || {};
    local.swaggerValidateDataSchema({
        data: swaggerJson,
        modeSchema: true,
        prefix: ["swaggerJson"],
        schema: local.swaggerSchemaJson,
        swaggerJson: swaggerJson
    });
    pathDict = {};
    Object.keys(swaggerJson.paths).forEach(function (path) {
        prefix = ["swaggerJson", "paths", path];
        // validate semanticPaths1
        test = path.indexOf("?") &lt; 0;
        local.throwSwaggerError(!test &amp;&amp; {
            errorType: "semanticPaths1",
            prefix: prefix
        });
        tmp = path.replace((
            /\{.*?\}/g
        ), "{}");
        // validate semanticPaths2
        test = !pathDict[tmp];
        local.throwSwaggerError(!test &amp;&amp; {
            errorType: "semanticPaths2",
            pathList: [pathDict[tmp], path],
            prefix: prefix
        });
        pathDict[tmp] = path;
        // validate semanticPaths3
        tmp = {};
        path.replace((
            /\{.*?\}/g
        ), function (match0) {
            test = !tmp[match0];
            local.throwSwaggerError(!test &amp;&amp; {
                errorType: "semanticPaths3",
                name: match0,
                prefix: prefix
            });
            tmp[match0] = true;
        });
        // validate semanticPaths5
        test = path.indexOf("{}") &lt; 0;
        local.throwSwaggerError(!test &amp;&amp; {
            errorType: "semanticPaths5",
            prefix: prefix
        });
    });
    // validate swaggerJson.definitions[key].properties[ii].default
    Object.keys(swaggerJson.definitions || {}).forEach(function (schemaName) {
        tmp = local.swaggerValidateDataSchema({
            // dereference definition
            modeDereference: true,
            prefix: ["swaggerJson", "definitions", schemaName],
            schema: swaggerJson.definitions[schemaName],
            swaggerJson: swaggerJson
        });
        Object.keys(tmp.properties || {}).forEach(function (key) {
            local.swaggerValidateDataSchema({
                modeDefault: true,
                prefix: ["swaggerJson", "definitions", schemaName, "properties", key],
                schema: tmp.properties[key],
                swaggerJson: swaggerJson
            });
        });
    });
    // validate swaggerJson.parameters[key].default
    Object.keys(swaggerJson.parameters || []).forEach(function (key) {
        local.swaggerValidateDataSchema({
            modeDefault: true,
            prefix: ["swaggerJson", "parameters", key],
            schema: swaggerJson.parameters[key],
            swaggerJson: swaggerJson
        });
    });
    // validate swaggerJson.paths[key][key].parameters[ii].default
    Object.keys(swaggerJson.paths).forEach(function (path) {
        Object.keys(swaggerJson.paths[path]).forEach(function (method) {
            prefix = ["swaggerJson", "paths", path, method];
            operation = local.swaggerValidateDataSchema({
                // dereference operation
                modeDereference: true,
                prefix: prefix,
                schema: swaggerJson.paths[path][method],
                swaggerJson: swaggerJson
            });
            // validate semanticOperationIds1
            test = !operationIdDict[operation.operationId];
            local.throwSwaggerError(!test &amp;&amp; {
                data: operation.operationId,
                errorType: "semanticOperationIds1",
                prefix: prefix.concat(["operationId"])
            });
            operationIdDict[operation.operationId]...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.swagger-validate-lite.swaggerValidateDataParameters" id="apidoc.element.swagger-validate-lite.swaggerValidateDataParameters">
        function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateDataParameters
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">swaggerValidateDataParameters = function (option) {
<span class="apidocCodeCommentSpan">/*
 * this function will validate the items in option.paramDict
 * against the schemaP's in option.parameters
 */
</span>    var errorList;
    errorList = [];
    option.parameters.forEach(function (schemaP) {
        local.tryCatchOnError(function () {
            local.swaggerValidateDataSchema({
                data: option.data[schemaP.name],
                dataReadonlyRemove: [
                    option.dataReadonlyRemove || {},
                    schemaP.name,
                    option.dataReadonlyRemove &amp;&amp; option.dataReadonlyRemove[schemaP.name]
                ],
                prefix: option.prefix.concat([schemaP.name]),
                schema: schemaP,
                swaggerJson: local.swaggerJson
            });
        }, function (errorCaught) {
            console.error(errorCaught.message);
            errorList.push(errorCaught);
            errorCaught.errorList = errorList;
        });
    });
    return errorList;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.swagger-validate-lite.swaggerValidateDataSchema" id="apidoc.element.swagger-validate-lite.swaggerValidateDataSchema">
        function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateDataSchema
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">swaggerValidateDataSchema = function (option) {
<span class="apidocCodeCommentSpan">/*
 * this function will validate option.data against the swagger option.schema
 * http://json-schema.org/draft-04/json-schema-validation.html#rfc.section.5
 */
</span>    var $ref;
    var circularSet;
    var data;
    var dataReadonlyRemove2;
    var ii;
    var list;
    var oneOf;
    var schema;
    var test;
    var tmp;
    if (!option.schema) {
        return;
    }
    data = option.data;
    option.dataReadonlyRemove = option.dataReadonlyRemove || [{}, "", null];
    dataReadonlyRemove2 = option.dataReadonlyRemove[2] || {};
    schema = option.schema;
    circularSet = new Set();
    while (true) {
        // dereference schema.schema
        while (schema.schema) {
            schema = schema.schema;
        }
        // dereference schema.oneOf
        oneOf = (data &amp;&amp; schema.oneOf) || [];
        ii = 0;
        while (ii &lt; oneOf.length) {
            tmp = String(oneOf[ii] &amp;&amp; oneOf[ii].$ref)
            .replace("http://json-schema.org/draft-04/schema#", "#");
            switch (tmp + " " + (!local.isNullOrUndefined(data.$ref) || data.in)) {
            case "#/definitions/bodyParameter body":
            case "#/definitions/formDataParameterSubSchema formData":
            case "#/definitions/headerParameterSubSchema header":
            case "#/definitions/jsonReference true":
            case "#/definitions/pathParameterSubSchema path":
            case "#/definitions/queryParameterSubSchema query":
                schema = local.swaggerSchemaJson.definitions[tmp.split("/")[2]];
                break;
            default:
                switch (tmp) {
                case "#/definitions/bodyParameter":
                case "#/definitions/jsonReference":
                    schema = oneOf[ii ^ 1];
                    break;
                }
            }
            if (!schema.oneOf) {
                break;
            }
            ii += 1;
        }
        // dereference schema.$ref
        $ref = schema &amp;&amp; schema.$ref;
        if (!$ref) {
            break;
        }
        test = !circularSet.has($ref);
        local.throwSwaggerError(!test &amp;&amp; {
            data: data,
            errorType: "schemaDereferenceCircular",
            prefix: option.prefix,
            schema: schema
        });
        circularSet.add($ref);
        // validate semanticWalker6
        test = (
            $ref.indexOf("#/") === 0
            || $ref.indexOf("http://json-schema.org/draft-04/schema#/") === 0
        );
        local.throwSwaggerError(!test &amp;&amp; {
            data: $ref,
            errorType: "semanticWalker6",
            prefix: option.prefix.concat(["$ref"])
        });
        switch (option.modeSchema &amp;&amp; $ref) {
        case "http://json-schema.org/draft-04/schema#/definitions/parameter":
            // validate semanticFormData1
            test = data.in !== "formdata";
            local.throwSwaggerError(!test &amp;&amp; {
                data: data.in,
                errorType: "semanticFormData1",
                prefix: option.prefix.concat(["in"])
            });
            // validate semanticFormData3
            test = data.type !== "file" || data.in === "formData";
            local.throwSwaggerError(!test &amp;&amp; {
                data: data,
                errorType: "semanticFormData3",
                prefix: option.prefix
            });
            // validate semanticParameters2
            test = data.in === "body" || !local.isNullOrUndefined(data.type);
            local.throwSwaggerError(!test &amp;&amp; {
                data: data,
                errorType: "semanticParameters2",
                prefix: option.prefix
            });
            break;
        case...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.swagger-validate-lite.swaggerValidateFile" id="apidoc.element.swagger-validate-lite.swaggerValidateFile">
        function <span class="apidocSignatureSpan">swagger-validate-lite.</span>swaggerValidateFile
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">swaggerValidateFile = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will validate the json-file option.file
 */
</span>    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            if (typeof option.data === "string") {
                option.onNext(null, option.data);
                return;
            }
            // fetch url
            if ((
                /^(?:http|https):\/\//
            ).test(option.file)) {
                local.ajax({
                    url: option.file
                }, function (error, xhr) {
                    option.onNext(error, xhr &amp;&amp; xhr.responseText);
                });
                return;
            }
            // read file
            local.fs.readFile(option.file, "utf8", option.onNext);
            break;
        case 2:
            // jslint
            local.jslint.jslintAndPrint(data, option.file);
            local.assertThrow(
                !local.jslint.jslintResult.errorText,
                local.jslint.jslintResult.errorText.replace((
                    /\u001b\[\d*m/g
                ), "")
            );
            // validate
            local.swgg.swaggerValidate(JSON.parse(data));
            option.onNext();
            break;
        default:
            console.error(
                error
                ? "\u001b[31mswagger-validate - failed - " + option.file + "\n"
                + error.message + "\u001b[39m"
                : "swagger-validate - passed - " + option.file
            );
            onError(error);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
local.cliDict = {};

local.cliDict._default = function () {
/*
 * &lt;file/url&gt;
 * will swagger-validate &lt;file/url&gt;
 */
    local.<span class="apidocCodeKeywordSpan">swaggerValidateFile</span>({
        file: process.argv[2]
    }, function (error) {
        process.exit(Boolean(error));
    });
};

// run the cli
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>